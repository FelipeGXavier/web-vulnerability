<?php

include_once('pdo.php');

function create() {
    $connection = connection();
    $name = $_POST['name'] ?? '';
    $surname = $_POST['surname'] ?? '';
    $birth = $_POST['birth'] ?? null;
    $sql = "INSERT INTO person (name, surname, birth) VALUES (:name, :surname, :birth)";
    $stmt = $connection->prepare($sql);
    $stmt->bindValue(':name', $name);
    $stmt->bindValue(':surname', $surname);
    $stmt->bindValue(':birth', $birth);
    return $stmt->execute();
}

function search() {
    $connection = connection();
    $sname = $_GET['sname'] ?? '';
    $sql = "SELECT * from person WHERE 1 = 1";
    if(!empty($sname)) {
        $sql .= " AND name = :name";
    }
    $stmt = $connection->prepare($sql);
    $stmt->bindValue(':name', $sname);
    $stmt->execute();
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
}




